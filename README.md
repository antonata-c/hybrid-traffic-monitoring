# Система мониторинга и оптимизации телекоммуникационного трафика в гибридных сетях связи

## Описание
Система для комплексного мониторинга, анализа и оптимизации трафика в гибридных телекоммуникационных сетях (оптоволокно, 5G, спутник, микроволновые каналы, Starlink). 
Проект использует FastAPI, PostgreSQL и различные алгоритмы оптимизации. Grafana используется для визуализации метрик и состояния сети.

## Функциональные возможности
- **Мониторинг гибридных сетей**: Сбор данных с разнотипных узлов связи (оптика, 5G, спутник и др.)
- **Анализ трафика**: Оценка качества соединения, выявление аномалий, генерация прогнозов
- **Оптимизация маршрутизации**: Автоматическая и ручная балансировка нагрузки между каналами
- **Управление QoS**: Приоритизация трафика по типам (голос, видео, данные)
- **Отказоустойчивость**: Автоматическое переключение между каналами при деградации
- **Визуализация**: Интерактивная топология сети, статистика и тренды

## Требования
- Python 3.10+
- PostgreSQL 14+
- Docker и Docker Compose
- Grafana

## Установка

1. **Клонируйте репозиторий:**
   ```bash
   git clone <repository_url>
   cd <repository_name>
   ```

2. **Создайте файл `.env` и заполните его зависимостями, перечисленными в `.env.example`**

3. **Запустите сервис:**
   ```bash
   docker-compose up --build
   ```

## Использование API

OpenAPI спецификация представлена по адресу http://localhost:8000/docs

### Основные эндпоинты:

- **GET /analytics** - Общая аналитика по трафику в гибридной сети
- **GET /analytics/{node_id}** - Детальная аналитика по конкретному узлу
- **GET /optimize** - Получение рекомендаций по оптимизации
- **POST /optimize/apply** - Применение выбранной рекомендации
- **POST /optimize/routes** - Ручное переключение маршрутов
- **POST /optimize/qos** - Настройка параметров QoS
- **GET /optimize/status** - Получение статусов по оптимизации
- **GET /network/topology** - Получение топологии сети

### Визуализация
- Откройте Grafana: http://localhost:3000
- Логин/пароль для первого входа: `admin/admin`
- Данные автоматически отображаются на преднастроенном дашборде.

## Структура проекта
- `src/` - Исходный код
  - `models.py` - Модели данных (узлы, QoS-политики, оптимизационные действия)
  - `enums.py` - Перечисления (типы узлов, приоритеты трафика, статусы сети)
  - `schemas.py` - Pydantic-схемы для API
  - `endpoints.py` - API-эндпоинты
  - `services/` - Бизнес-логика
    - `analyzer.py` - Анализ трафика и выявление аномалий
    - `optimizer.py` - Алгоритмы оптимизации и балансировки
    - `collector.py` - Сбор данных с узлов сети
  - `datasources/` - Источники данных
- `data/` - Датасеты для сбора данных о трафике
- `grafana/` - Настройки визуализации
- `alembic/` - Миграции базы данных
- `docker-compose.yaml` - Конфигурация сервисов

## Работа с разными типами узлов
Система поддерживает следующие типы узлов:
- **fiber** - Оптоволоконные каналы (низкая задержка, высокая пропускная способность)
- **5G** - Узлы мобильной связи 5G (средняя задержка, хорошая мобильность)
- **satellite** - Спутниковые каналы (высокая задержка, широкое покрытие)
- **microwave** - Микроволновые каналы (средняя задержка, экономичное развертывание)
- **starlink** - Спутниковая система Starlink (средняя задержка, глобальное покрытие)
- **hybrid** - Комбинированные узлы (адаптивность к условиям)

## Примечания по развертыванию
- Для запуска на продакшн рекомендуется настроить CORS и авторизацию
- Оптимальная производительность достигается при использовании асинхронных операций
- Логи пишутся на уровне `INFO` для мониторинга работы системы
- Для подключения к реальным узлам необходимо настроить SNMP
